{"version":3,"sources":["./src/app/adminTheatrePages/purchases/purchases.service.ts"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { API_URL } from 'src/app/app.constants';\r\nimport { TokenStorageService } from 'src/app/authentication/tokenStorage.service';\r\nimport { IPurchaseData } from 'src/app/shared/interfaces/IPurchaseData';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PurchasesService {\r\n\r\nconstructor(private token: TokenStorageService,\r\n  private httpClient: HttpClient) { }\r\n\r\npublic API_URL = API_URL;\r\npublic theatreId = this.token.getTheatreId();\r\npublic userId = this.token.getUserId();\r\n\r\n  getPurchasesFilteredByTheatre(perPage: number = 4, pageNumber: number = 1, \r\n    searchQuery: string = \"\", sortOrder: string = \"\") \r\n  : Observable<IPurchaseData>{\r\n    let params = new HttpParams();\r\n    params = params.append('perPage', String(perPage));\r\n    params = params.append('pageNumber', String(pageNumber));\r\n    params = params.append('searchQuery', String(searchQuery));\r\n    params = params.append('sortOrder', String(sortOrder));\r\n    params = params.append('Type', 'purchasesFilteredByTheatre');\r\n    params = params.append('TheatreId', this.theatreId);\r\n\r\n    return this.httpClient.get<IPurchaseData>(this.API_URL + '/purchases', { params })\r\n      .pipe(\r\n        map((purchase: IPurchaseData) => purchase)\r\n      )}\r\n\r\n  getPurchasesFilteredByUser(perPage: number = 4, pageNumber: number = 1, \r\n      searchQuery: string = \"\", sortOrder: string = \"\") \r\n    : Observable<IPurchaseData>{\r\n    let params = new HttpParams();\r\n    params = params.append('perPage', String(perPage));\r\n    params = params.append('pageNumber', String(pageNumber));\r\n    params = params.append('searchQuery', String(searchQuery));\r\n    params = params.append('sortOrder', String(sortOrder));\r\n    params = params.append('Type', 'purchasesFilteredByUser');\r\n    params = params.append('UserId', this.userId);\r\n      \r\n    return this.httpClient.get<IPurchaseData>(this.API_URL + '/purchases', { params })\r\n      .pipe(\r\n        map((purchase: IPurchaseData) => purchase)\r\n      )}\r\n\r\n\r\n\r\n  getPurchasesNumberFilteredByTheatre(theatreId) : Observable<number>{\r\n    let params = new HttpParams();\r\n    params = params.append('Type', 'purchasesNumberFilteredByTheatre');\r\n    params = params.append('TheatreId', theatreId);\r\n  \r\n    return this.httpClient.get<number>(this.API_URL + '/purchases', { params })\r\n      .pipe(\r\n        map((purchases: number) => purchases)\r\n      )\r\n    }\r\n\r\n  getRecentPurchasesFilteredByTheatre(theatreId) : Observable<number>{\r\n    let params = new HttpParams();\r\n    params = params.append('Type', 'recentPurchasesFilteredByTheatre');\r\n    params = params.append('TheatreId', theatreId);\r\n    \r\n    return this.httpClient.get<number>(this.API_URL + '/purchases', { params })\r\n      .pipe(\r\n        map((purchases: number) => purchases)\r\n      )\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}